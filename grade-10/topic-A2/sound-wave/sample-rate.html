<!DOCTYPE html>
<html>
<head>
    <title>Sine Wave Chart</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div style="margin-bottom: 1rem;">
        <p>Sample rate thấp</p>
        <canvas id="sineWaveChart_1" style="width:100%; max-width:600px; max-height: 337px;"></canvas>
    </div>
    <div>
        <p>Sample rate cao</p>
    <canvas id="sineWaveChart_2" style="width:100%; max-width:600px; max-height: 337px;"></canvas>    
    </div>
    <script>
        // Function to generate sine wave data
        function generateSineWave(frequency, phaseShift, duration, sampleRate) {
            const wave = [];

            let amplitude = 1.2;

            for (let i = 0.1; i < duration * sampleRate; ++i) {
                const t = i / sampleRate;
                const y = amplitude * Math.sin(2 * Math.PI * frequency * t + phaseShift);

                if (t > 15) {
                    amplitude = 0.8;
                } else if (t > 10) {
                    amplitude = 0.8;
                } else if (t > 5) {
                    amplitude = 0.6;
                }
                wave.push(y);
            }
            return wave;
        }

        const frequency = 0.1; // Frequency in Hz
        const phaseShift = 0; // Phase shift (initial position of the wave)
        const duration = 20; // Duration set to 20 seconds
        const sampleRate = 10; // Sample rate in Hz (typical for audio) 44100

        const soundWave = generateSineWave(frequency, phaseShift, duration, sampleRate);

        // Create an array of time values for the x-axis
        const timeValues = Array.from({
            length: soundWave.length
        }, (_, i) => i / sampleRate);

        // chart 1
        var ctx = document.getElementById('sineWaveChart_1').getContext('2d');
        var myChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: timeValues,
                datasets: [{
                        data: soundWave,
                        borderColor: '#6c96c4',
                        borderWith: 1,
                        fill: false,
                        pointRadius: 0,
                    },
                    {
                        data: [{
                            x: 0, y: 0
}, {
                            x: 2, y: 0
}, {
                            x: 2, y: 1.144
}, {
                            x: 6, y: 1.144
}, {
                            x: 6, y: -0.356
}, {
                            x: 12, y: -0.356
}, {
                            x: 12, y: 0.762
}, {
                            x: 16, y: 0.762
}, {
                            x: 16, y: -0.474
}, {
                            x: 20, y: -0.474
}],
                        borderWith: 1,
                        fill: false,
                        borderColor: '#f00',
                        pointRadius: 0,
                    }
                ]
            },
            options: {
                plugins: {
                    legend: {
                        display: false
                    },
                },
                scales: {
                    x: {
                        type: 'linear',
                        position: 'bottom',
                        title: {
                            display: true,
                            text: 'Thời gian',
                            font: {
                                size: 16,
                                family: '"Google Sans, Roboto, Arial, "sans-serif"'
                            },
                        },
                        grid: {
                            display: false
                        },
                    },
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Cường độ âm thanh'
                        }
                    }
                }
            }
        });

        // chart 2
        var ctx = document.getElementById('sineWaveChart_2').getContext('2d');
        var myChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: timeValues,
                datasets: [{
                    data: soundWave,
                    borderColor: '#6c96c4',
                    borderWith: 1,
                    fill: false,
                    pointRadius: 0,
                },
                {
                    data: [{x:0, y:0},{x:1, y:0},{x:1, y:0.711},{x:2, y:0.711},{x:2, y:1.144},{x:3, y:1.144},{x:3, y:0.711},{x:4, y:0.711},{x:4, y:0},
                    {x:5, y:0},{x:5, y:-0.356},{x:6, y:-0.356},{x:6, y:-0.572},{x:7, y:-0.572},{x:7, y:-0.569},{x:7, y:-0.6},
                    {x:8, y:-0.6},{x:8, y:-0.569},{x:9, y:-0.569},
                    {x:9, y:-0.35},{x:10, y:-0.35},{x:10, y:0.005},{x:11, y:0.005},{x:11, y:0.474},{x:12, y:0.474},
                    {x:12, y:0.762},{x:13, y:0.762},{x:13, y:0.474},{x:14, y:0.474},
                    {x:14, y:0.466},{x:14, y:0-0.005},{x:15, y:-0.005},{x:15, y:-0.474},
                    {x:16, y:-0.474},{x:16, y:-0.762},{x:17, y:-0.762},{x:17, y:-0.8},{x:18, y:-0.8},{x:18, y:-0.762},
                    {x:19, y:-0.762},{x:19, y:-0.474},{x:20, y:-0.474},{x:20, y:0}],
                    borderWith: 1,
                    fill: false,
                    borderColor: '#f00',
                    pointRadius: 0,
                }]
            },
            options: {
                plugins: {
                    legend: {
                        display: false
                    },
                },
                scales: {
                    x: {
                        type: 'linear',
                        position: 'bottom',
                        title: {
                            display: true,
                            text: 'Thời gian',
                            font: {
                                size: 16,
                                family: '"Google Sans, Roboto, Arial, "sans-serif"'
                            },
                        },
                        grid: {
                            display: false},
                    },
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Cường độ âm thanh'
                        }
                    }
                }
            }
        });
    </script>
</body>

</html>